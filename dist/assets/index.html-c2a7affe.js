import{h as s,p as i,o as e,_ as u,B as g}from"./jsxRuntime.module-ec932d22.js";import{g as l}from"./get-from-local-storage-e32e525a.js";import{g as p}from"./page-infos-e73a98a1.js";function h(){const[a,o]=s(!1),[n,t]=s(!0),c=async()=>{const{commands:r}=await l(["commands"]);await navigator.clipboard.writeText(r),o(!0),setTimeout(()=>{o(!1)},2e3)};return i(()=>{chrome.storage.local.get(["commands"],({commands:r})=>{t(!r)}),chrome.storage.local.onChanged.addListener(r=>{r.commands&&(r.commands.newValue?t(!1):t(!0))})},[]),a?e("div",{children:e("div",{id:"commandsCopied",children:"Copied !"})}):e("div",{children:e("button",{onClick:c,disabled:n,children:"Copy"})})}function f(){const[a,o]=s(!0),[n,t]=s(!1),c=async()=>{const{currentPrompt:d,technology:m}=await l(["currentPrompt","technology"]);await chrome.runtime.sendMessage({command:"callChatGPT",technology:m,currentPrompt:d})},r=async()=>{const{apiKey:d,loading:m}=await l(["apiKey","loading"]);o(!d),t(m)};return i(()=>{r(),chrome.storage.local.onChanged.addListener(d=>{d.loading&&t(d.loading.newValue)})},[]),n?e("div",{children:e("div",{class:"loader"})}):e("div",{children:e("button",{id:"generateCommands",disabled:a,onClick:c,children:"Generate"})})}function y(){const[a,o]=s(!1),n=async()=>{try{const{id:t}=await p(),{lastPageGenerated:c,commands:r}=await l(["lastPageGenerated","commands"]);!r||c===t?o(!1):r&&o(!0)}catch(t){console.error(t),o(!0)}};return i(()=>{n(),chrome.storage.onChanged.addListener(t=>{(t.lastPageGenerated||t.commands)&&n()})},[]),a?e("h4",{class:"error",id:"notCommandsOfPage",children:"Those commands were not generated for the current page!"}):null}function C(){const[a,o]=s(""),n=async()=>{const{apiKey:t,commands:c}=await l(["apiKey","commands"]);o(c||(t?"Click the button below to generate OpenAI commands from the current Notion page.":"Please set your API key in the options page."))};return i(()=>{n(),chrome.storage.onChanged.addListener(t=>{t.commands&&o(t.commands.newValue)})},[]),e("div",{id:"commandsContainer",children:[e("b",{children:"Copy and run the generated shell commands"}),e("p",{id:"commands",children:a})]})}function P(){const[a,o]=s("");return i(()=>{chrome.storage.local.get(["currentPrompt"],({currentPrompt:n})=>{o(n)})},[]),i(()=>{chrome.storage.local.set({currentPrompt:a})},[a]),e("div",{children:[e("label",{for:"currentPrompt",children:"Custom prompt"}),e("textarea",{id:"currentPrompt",value:a,onInput:n=>o(n.currentTarget.value),rows:4,placeholder:"A custom prompt to add on the ChatGPT message"})]})}function v(){const[a,o]=s("NestJS");return i(()=>{chrome.storage.local.get(["technology"],({technology:n})=>{o(n)})},[]),i(()=>{chrome.storage.local.set({technology:a})},[a]),e("div",{children:[e("label",{for:"technology",children:"Technology to use"}),e("input",{id:"technology",type:"text",value:a,onInput:n=>o(n.currentTarget.value),placeholder:"By default it is NestJS"})]})}function w(){return e(u,{children:[e("h1",{children:"ðŸš€ Notion specifications to code"}),e(y,{}),e(C,{}),e(v,{}),e(P,{}),e("div",{class:"actions",children:[e(h,{}),e(f,{})]})]})}g(e(w,{}),document.getElementById("app"));
